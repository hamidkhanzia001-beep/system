<!DOCTYPE html>
<html lang="ps" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haji Kochai Ltd</title>
    <style>
        :root { --main: #1a73e8; --bg: #f8f9fa; }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: var(--bg); margin: 0; padding: 15px; }
        .container { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .header { text-align: center; border-bottom: 3px solid var(--main); padding-bottom: 10px; margin-bottom: 20px; }
        .balance-box { background: #202124; color: white; padding: 20px; border-radius: 12px; text-align: center; margin-bottom: 20px; }
        input, button { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid #ddd; box-sizing: border-box; font-size: 16px; }
        button { background: var(--main); color: white; border: none; font-weight: bold; cursor: pointer; }
        .item { display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #eee; }
        .red { color: #d93025; font-weight: bold; }
        .green { color: #1e8e3e; font-weight: bold; }
        .hidden { display: none; }
        @media print { .no-print { display: none; } .container { box-shadow: none; width: 100%; } }
        .footer-print { display: none; margin-top: 50px; }
        @media print { .footer-print { display: flex; justify-content: space-between; } }
    </style>
</head>
<body>

<div id="login-page" class="container" style="margin-top: 50px;">
    <h2 style="text-align:center;">Haji Kochai Ltd</h2>
    <p style="text-align:center;">خپل پاسورډ ولیکئ:</p>
    <input type="password" id="p" placeholder="پاسورډ (1234)">
    <button type="button" onclick="login()">داخلېدل</button>
</div>

<div id="app" class="container hidden">
    <div class="header">
        <img src="Logo.png" style="width:70px; height:70px; border-radius:50%;" onerror="this.style.display='none'">
        <h2>Haji Kochai Oil & Sugar Ltd</h2>
        <p>د مالي حساباتو سیسټم</p>
    </div>

    <div class="balance-box">
        <p style="margin:0; opacity:0.8;">اوسنۍ مجموعه (Total Balance)</p>
        <h1 id="total-display">0.00 $</h1>
    </div>

    <div class="no-print">
        <input type="text" id="desc" placeholder="د معاملې تفصیل">
        <input type="number" id="amt" placeholder="مقدار (مثلاً: 500 یا -200)">
        <button type="button" onclick="addEntry()">ثبتول</button>
        <button type="button" onclick="window.print()" style="background:#1e8e3e;">راپور چاپول</button>
    </div>

    <div id="list">
        <h3>تاریخچه</h3>
        <div id="history-items"></div>
    </div>

    <div class="footer-print">
        <div style="text-align:center;"><p>مالي مدیر</p><br>______</div>
        <div style="text-align:center;"><img src="Stamp.png" style="width:80px;" onerror="this.style.display='none'"><p>Nesar Ahmad Kochai</p></div>
    </div>
</div>

<script>
    let entries = JSON.parse(localStorage.getItem('kochai_v1')) || [];
    
    // د ننوتلو فنکشن
    function login() {
        const pass = document.getElementById('p').value;
        if(pass === "1234") {
            document.getElementById('login-page').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
            updateUI();
        } else {
            alert("غلط پاسورډ!");
        }
    }

    // د معاملې ثبتول
    function addEntry() {
        const desc = document.getElementById('desc').value;
        const amt = parseFloat(document.getElementById('amt').value);
        if(!desc || isNaN(amt)) return alert("معلومات سم ولیکئ");
        
        entries.push({ desc, amt, date: new Date().toLocaleDateString() });
        localStorage.setItem('kochai_v1', JSON.stringify(entries));
        updateUI();
        
        document.getElementById('desc').value = '';
        document.getElementById('amt').value = '';
    }

    // د تاریخچې او مجموعې تازه کول
    function updateUI() {
        const list = document.getElementById('history-items');
        list.innerHTML = '';
        let total = 0;
        entries.forEach(e => {
            total += e.amt;
            list.innerHTML += `<div class="item">
                <span>${e.desc} <small>(${e.date})</small></span>
                <span class="${e.amt >= 0 ? 'green' : 'red'}">${e.amt.toFixed(2)} $</span>
            </div>`;
        });
        document.getElementById('total-display').innerText = total.toFixed(2) + ' $';
    }
</script>
</body>
</html>
