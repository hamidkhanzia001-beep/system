<!DOCTYPE html>
<html lang="ps" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haji Kochai Ltd | مالي ډشبورډ</title>
    <link rel="stylesheet" href="style.css">
    <style>
        :root { --blue: #004aad; --green: #28a745; --red: #dc3545; --dark: #1e293b; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f1f5f9; margin: 0; padding: 15px; }
        .box { max-width: 800px; margin: auto; background: white; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); padding: 25px; }
        .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 4px solid var(--blue); padding-bottom: 15px; margin-bottom: 20px; }
        .logo { width: 100px; height: 100px; border-radius: 50%; border: 3px solid var(--blue); }
        .stats { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 25px; }
        .stat-card { padding: 20px; border-radius: 15px; color: white; text-align: center; }
        .income { background: var(--green); } .expense { background: var(--red); }
        input, select, button { width: 100%; padding: 14px; margin: 8px 0; border-radius: 10px; border: 1px solid #ddd; font-size: 16px; font-weight: bold; }
        button { background: var(--blue); color: white; cursor: pointer; transition: 0.3s; border: none; }
        button:hover { opacity: 0.9; }
        .table-container { overflow-x: auto; margin-top: 25px; }
        table { width: 100%; border-collapse: collapse; text-align: right; }
        th { background: var(--dark); color: white; padding: 12px; }
        td { padding: 12px; border-bottom: 1px solid #eee; }
        .stamp-area { display: none; margin-top: 50px; justify-content: space-between; align-items: center; }
        @media print { .no-print { display: none; } .box { box-shadow: none; border: none; } .stamp-area { display: flex; } }
        .hidden { display: none; }
    </style>
</head>
<body>

<div id="login" class="box" style="text-align:center; margin-top: 50px;">
    <img src="logo.png" class="logo" onerror="this.src='https://via.placeholder.com/100?text=HK'">
    <h2>Haji Kochai Oil & Sugar Ltd</h2>
    <input type="password" id="pass" placeholder="پاسورډ: 1234">
    <button onclick="login()">سیسټم ته ننوتل</button>
</div>

<div id="app" class="box hidden">
    <div class="header">
        <div>
            <h2 style="margin:0; color:var(--blue);">Haji Kochai Ltd</h2>
            <p style="margin:5px 0;">د تېلو او بورې عمومي واردات</p>
        </div>
        <img src="logo.png" class="logo" onerror="this.style.display='none'">
    </div>

    <div class="stats">
        <div class="stat-card income"><h3>ټول عاید</h3><h2 id="total-in">0.00 $</h2></div>
        <div class="stat-card expense"><h3>ټول مصرف</h3><h2 id="total-out">0.00 $</h2></div>
    </div>

    <div class="no-print">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
            <input type="text" id="desc" placeholder="د معاملې تفصیل">
            <select id="type">
                <option value="in">عاید (+)</option>
                <option value="out">مصرف (-)</option>
            </select>
        </div>
        <input type="number" id="amt" placeholder="مقدار (ډالر)">
        <button onclick="add()">ثبت کړه</button>
        <button onclick="window.print()" style="background:#555;">د رسمي راپور چاپ</button>
    </div>

    <div class="table-container">
        <h3>د حسابونو دقیق لیست</h3>
        <table>
            <thead>
                <tr>
                    <th>تفصیل</th>
                    <th>بڼه</th>
                    <th>مقدار</th>
                    <th>تاریخ</th>
                </tr>
            </thead>
            <tbody id="list"></tbody>
        </table>
    </div>

    <div class="stamp-area">
        <div style="text-align:center;"><p>مالي مسئول</p><br><br>______</div>
        <img src="stamp.png" width="120" onerror="this.style.display='none'">
        <div style="text-align:center;"><p>د شرکت رئیس</p><br><br>______</div>
    </div>
</div>

<script>
    let data = JSON.parse(localStorage.getItem('hk_pro_data')) || [];
    function login() {
        if(document.getElementById('pass').value === "1234") {
            document.getElementById('login').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
            render();
        } else { alert("غلط پاسورډ!"); }
    }
    function add() {
        let d = document.getElementById('desc').value;
        let t = document.getElementById('type').value;
        let a = parseFloat(document.getElementById('amt').value);
        if(d && a) {
            data.push({d, t, a, dt: new Date().toLocaleDateString()});
            localStorage.setItem('hk_pro_data', JSON.stringify(data));
            render();
            document.getElementById('desc').value = ''; document.getElementById('amt').value = '';
        }
    }
    function render() {
        let list = document.getElementById('list');
        list.innerHTML = '';
        let tin = 0, tout = 0;
        data.forEach(x => {
            if(x.t === 'in') tin += x.a; else tout += x.a;
            list.innerHTML += `<tr>
                <td>${x.d}</td>
                <td style="color:${x.t === 'in' ? 'green' : 'red'}">${x.t === 'in' ? 'عاید' : 'مصرف'}</td>
                <td><b>${x.a} $</b></td>
                <td>${x.dt}</td>
            </tr>`;
        });
        document.getElementById('total-in').innerText = tin.toFixed(2) + " $";
        document.getElementById('total-out').innerText = tout.toFixed(2) + " $";
    }
</script>
</body>
</html>
